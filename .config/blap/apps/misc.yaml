applications:
  rclone:
    source:
      github:
        project: "rclone/rclone"
        release:
          asset: "rclone-(.+?)-osx-arm64.zip"
  blap:
    source:
      github:
        project: "seanenck/blap"
        release:
          asset: "tarball"
    build:
      steps:
        - command: ["just", "version={{ $.Vars.Tag }}"]
        - command: ["/bin/sh", "-c", "target/blap completions > target/blap.bash"]
    deploy:
      artifacts:
        - files:
            - "target/blap"
          destination: "~/.local/bin"
        - files:
            - "target/blap.bash"
          destination: "~/.config/shellrc/completions/"
  shellcheck:
    source:
      github:
        project: "koalaman/shellcheck"
        release:
          asset: '{{ $.OS }}.{{ if eq $.Arch "amd64" }}x86_64{{ end }}.tar.xz$'
    deploy:
      artifacts:
        - files:
            - "shellcheck"
          destination: "~/.local/bin"
  efm:
    source:
      github:
        project: "mattn/efm-langserver"
        release:
          asset: "tarball"
    build:
      steps:
        - command: ["go", "build", "-ldflags", "-X main.revision={{ $.Vars.Tag }}", "-o", "efm-langserver", "."]
    deploy:
      artifacts:
        - files:
            - "efm-langserver"
          destination: "~/.local/bin"
  gittools:
    source:
      github:
        project: "seanenck/git-tools"
        branch:
          name: "master"
    build:
      steps:
        - command: ["just"]
    deploy:
      artifacts:
        - files:
            - git-uncommitted
            - git-current-state
          destination: "~/.local/bin"
