applications:
  gopls:
    source:
      github:
        project: "golang/tools"
        release:
          asset: "tarball"
    commands:
      steps:
        - command: ["go", "build", "-v", "-buildmode=pie", "-mod=readonly", "-modcacherw", "-ldflags", "-compressdwarf=false", "-o", "gopls"]
          directory: "gopls"
        - command: ["ln", "-sf", "{{ $.Vars.Directory }}/gopls/gopls", "$DESTDIR/gopls"]
  go:
    priority: 100
    source:
      git:
        repository: "https://github.com/golang/go"
        tagged:
          download: "https://go.dev/dl/{{ $.Vars.Tag }}.{{ $.OS }}-{{ $.Arch }}.tar.gz"
          filters: 
            - "refs/tags/weekly"
            - "refs/tags/release"
            - "[0-9]rc[0-9]"
    commands:
      steps:
        - command: ["ln", "-sf", "{{ $.Vars.Directory}}/bin/go", "$DESTDIR/go"]
  gofumpt:
    source:
      github:
        project: "mvdan/gofumpt"
        release:
          asset: "tarball"
    commands:
      steps:
        - command: ["go", "build", "-trimpath", "-mod=readonly", "-modcacherw"]
        - command: ["ln", "-sf", "{{ $.Vars.Directory }}/gofumpt", "$DESTDIR/gofumpt"]
  revive:
    source:
      github:
        project: "mgechev/revive"
        release:
          asset: "tarball"
    commands:
      steps:
        - command: ["go", "build", "-buildmode=pie", "-trimpath", "-modcacherw"]
        - command: ["ln", "-sf", "{{ $.Vars.Directory }}/revive", "$DESTDIR/revive"]
  staticcheck:
    source:
      github:
        project: "dominikh/go-tools"
        release:
          asset: "tarball"
    commands:
      steps:
        - command: ["go", "build", "-v", "-mod=readonly", "-modcacherw", "-ldflags", "-compressdwarf=false", "-o", "staticcheck", "./cmd/staticcheck"]
        - command: ["ln", "-sf", "{{ $.Vars.Directory }}/staticcheck/staticcheck", "$DESTDIR/staticcheck"]
