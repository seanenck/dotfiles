# Maintainer: Sean Enck <enckse@voidedtech.com>
pkgname=lockbox
pkgver=1.4.1
pkgrel=1
pkgdesc="pass inspired,kdbx-based password manager"
url="https://github.com/enckse/lockbox"
license="GPL-3"
arch="all"
options="!check chmod-clean net"
makedepends="go make"
source="$pkgname-$pkgver.tar.gz::https://github.com/enckse/lockbox/archive/refs/tags/v$pkgver.tar.gz"
subpackages="$pkgname-bash-completion"

export GOPATH="$srcdir"

build() {
  make VERSION=$pkgver
  ./bin/lb bash > bin/completions
}

package() {
  install -Dm755 bin/lb "$pkgdir/usr/bin/lb"
  install -Dm644 bin/completions "$pkgdir/usr/share/bash-completion/completions/lb"
}

sha512sums="
db2bfeeaa2aebf060f65b6390b15d370784a9376c8b22a8c2ecabaab044cbb37227a5d7b982be3408e53b5efe2a72d5bd7cc5697123b7cf0f0e08568a8a3ed86  lockbox-1.4.1.tar.gz
"
