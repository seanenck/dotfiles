#!/bin/sh
PLUGINS="$HOME/.config/nvim/pack/plugins/start"

for PLUGIN in $(cat "$HOME/.config/voidedtech/neovim-plugins"); do
  BNAME=$(basename "$PLUGIN")
  CLONE="$PLUGINS/$BNAME"
  echo "syncing: $BNAME"
  if [ -d "$CLONE" ]; then
    if ! git -C "$CLONE" pull origin "$(git -C "$CLONE" rev-parse --abbrev-ref HEAD)"; then
      echo "  -> failed to update"
    fi
  else
    if ! git clone "$PLUGIN" "$CLONE" --single-branch; then
      echo "  -> failed to clone"
    fi
  fi
done
